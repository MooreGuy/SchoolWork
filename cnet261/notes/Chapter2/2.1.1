/*************************
  INTRO
*************************/

Switches connect multiple devices, and are responsible for 
	directing and controlling the data flow at the access layer	
	to networked resources.

Cisco switches are "self-configuring" and no additional configurations
	need to be made out of the box.	

	Cisco switches run Cisco IOS thus can be manually configured:
		
		adjusting port speed
		
		bandwidth

		security requirements

Cisco switches can be managed remotely or locally.

	remote management requires:
		IP address
		default gateway

Switches operate at the access layer. The access layer is:

	Uncomplicated: It departments want uncomplicated access to users.
	Most vulnerable area: Very exposed to users.

Because of the previous issues, switches must be secure to protect:
	
	user data
	high speed connections

To achieve this switch security, port security is one of the security
	features that manged switches provide.


/*************************
 	SWITCH BOOT SEQUENCE 
*************************/

When the switch is powered on it goes through the following boot 
	sequence.

	1. POST ( power-on-self-test) is loaded from ROM to check
		CPU subsystems:
			CPU
			DRAM
			portion of the flash device that makes up the flash file
				system

	2. Loads boot loader:
		Small program stored in ROM
		Runs immediately after POST successfully completes

	3. Boot loader performs low-level CPU initilization:
		initializes the CPU registers
			these control where physical memory:

				where it is mapped
				the quantity
				speed

	4. Boot loader initializes the flash file system on the system 
			board.

	5. Boot loader Locates and loads a default IOS operating system 
			software image into memory and hands control of the switch
			over to the IOS.

Boot Loader finds the Cisco IOS image:
	
	Switch attempts to automatically boot using informationin the 
		BOOT enviroment
		
		If this variable is not set, attempts to load and execute
			the first executable file with recursive depth-first search
			in the flash file system.
		
		A depth first search of a directory is each encountered 
			subdirectory is completely searched before continuing the
			search in the original directory.
		
		On Catalyst 2960 the image file is contained in a directory
			that has the same name as the image file (excluding the .bin
			file extension)	

The IOS operating system initializes the interfaces using the Cisco
	commands found in the configuration file, startup configuration
	stored in NVRAM

We can set the BOOT enviroment variable by using:
	
	boot system (global configuration mode command) 

We can view the current IOS boot file is set to by using:
	
	show bootvar (show boot in older IOS versions)


/**********************************
	RECOVERING FROM A SYSTEM CRASH
***********************************/

The boot loader provides access into the switch if the operating system 
	is either:
		missing or damaged system files

	The boot loader has:
		
		A command line 
		access to the files stored in flash memory

To access the boot loader through a console connection follow these
	 steps.
	
	1. connect a PC by console cable to the switch console port.
		 Configure terminal emulation software to connect to the switch.

	2. Unplug the switch the switch power cord.
		
	3. Reconnect the power cord to the switch, within 15 seconds press 
			and hold down the Mode button while the system LED is still
			flashing green.

	4. Continue pressing the Mode button until the System LED turns 
		briefly amber and then solid green, then release it.

	5. The boot loader "switch:" prompt appears in the terminal
		emulator.
	
The boot loader command line supports commands to:
		
	format the flash file system
	reinstall the operating system software
	recover from a lost or forgotten password
	
	the dir command can be used to view a list of files within
		a specified directory

/**********************************
	LEDs	
***********************************/
There are several status LED indicator lights on a Cisco switch that can
	be used to monitor:
		
		Switch activity
		Performance

	MODE button: used to toggle through:
		
		port status
		port duplex
		port speed
		PoE (if supported)

	System LED: Shows if the system is functioning properly
		
		off= not powered on
		green= has power and functioning
		amber= has power but not functioning

	Redundant Power System (RPS) LED: RPS status indicator
		
		off= RPS is off or not properly connected

		green= RPS is connected and ready to provide back-up power

		blinking green= RPS is connected but is unavailable, because it is

			providing power to another device.
		amber= RPS is in standby mode or in a fault condition

		blinking amber= The internal power supply in the switch has failed,
			and the RPS is providing power.

	Port Status LED: Indicates that the port status mode is selected when 
		it is green
			
		Port LEDs: displays colors with different meanings for the status
			of an individual port

			off= No link, or port was admistratively shut down

			green= link present

			blinking green= activity and the port is sending or recieving
				data
		
			alternating green-amber= link fault
		
			amber= blocked to ensure a loop does not exist in the forwarding
				domain, and is not forwarding data (ports remain in this 
				state for the first 30 seconds after being activated)

			blinking amber= blocked to prevent possible loop in forarding
				domain.

	Port Duplex LED: Indicates the port duplex mode is selected when green.

		off= half-duplex mode

		green= full-duplex

	Port Speed LED: Indicates the port speed mode is selected.

		off= 10Mb/s
	
		green= 100Mb/s

		blinking green= 1000Mb/s

	Power over Ethernet (PoE) Mode LED: If supported

		off= PoE mode is not selected and no ports have been denied power
			or placed in a fault condition.

		blinking amber= PoE is not selected but at least one port
			has been denied power, or has a PoE fault.

		green= PoE mode is selected and the port LEDs will display colors
			with different meanings.

		Port LEDs:
			
			off= PoE is off

			green= PoE is on

			alternating green-amber= PoE is denied because providing power
				to the power device will exceed the switch power capacity.

			blinking amber= PoE is off due to a fault

			amber= PoE for the port has been disabled.	

/**********************************
	BASIC SWITCH CONFIGURATION	
***********************************/

To prepare a switch for remote management access the switch must have:
	(Standard host ip configuration)
	
		IP address
		Subnet Mask
		if: the switch is on a remote network
			must be configured with a default gateway

	An SVI or switch virtual interface should be assigned an IP address
		
		SVI is a virtual interface, and not a physical port on the switch.

		SVI uses the concept of VLANS
			
			VLANS are numbered logically to groups to which physical ports
				can be assigned.  

			Configurations and settings applied to VLANS can also applied to
				all ports assigned to that VLAN

	Default management VLAN is VLAN 1 and all ports are assigned to it by
		default.
			
		Best practice: the management VLAN should be on another VLAN than 1

	IP settings only allow routing, so the switch still can't route layer 3.

Step 1: Configure Management Interface

	From the VLAN interface configuration mode you can configure the:

		IP Address of a SVI
		Subnet mask of a SVI	

	[COMMANDS]
		S1(config)# vlan [vlan_id]
			Creates the vlan with an id of $[vlan_id]	

		S1(config-vlan)# name [vlan_name]
			Names the vlan to [vlan_name]

		S1(config-vlan)# exit
			Exits vlan configuration.

		S1(config)# interface [interface_id]
			Enter interface configuraiton mode to the interface id selected

		S1(config-if)# switchport access vlan [vlan_id]
			Sets the port as access of the vlan vlan_id	

	Note: the SVI for a VLAN will not appear as "up/up" until it is create
		and a device is connected to the switch port associated with it.

	[COMMANDS]
		
		s1$ configure terminal
			Enter global configuration mode

		s1 (config)# interface vlan 99
			Enter interface configuration mode for the SVI

		s1 (config-if)# ip address  172.17.99.11 255.255.255.0
			configure the management interface IP address

		s1 (config-if)# no shutdown
			Enable the management interface

		s1 (config-if)# end
			return to the priveleged EXEC mode

		s1# copy running-config startup-config
			Save the running config to the startup config	

Step 2: Configure Default Gateway

	This is necessary if it will be managed from remote networks.	
	
	The default gateway is the router that the switch is connected to. And
		is set to the IP address of this router.			

	To set the default gateway use the command:
	
		[COMMAND] S1 (config)# ip default-gateway

Step 3: Verify Configuration

	To determine the status of both physical and virtual interfaces use:
	
		[COMMAND] S1# show ip interface brief
		[COMMAND] S1# show vlan brief


/**************************************
	BASIC SWITCH SETTINGS
**************************************/

The hostname must be set
	
	[COMMAND] Switch(config)# hostname S1

Password encryption must be set

	[COMMAND] S1(config)# service password-encryption

A password for priveleged EXEC mode access must be set

	[COMMAND] S1(config)# enable secret class

Prevent unwanted DNS lookups

	[COMMAND] S1(config)# no ip domain-lookup

Configure MOTD banner

	[COMMAND] S1(config)# banner motd # 
		Unauthorized access is strictly prohibited. #	

Verify your access settings by moving between modes
	[COMMAND] S1(config)# exit
	[COMMAND] S1# exit	


/**************************************
	CONFIGURING CONSOLE PORT	
**************************************/

Console port access should also be restricted. The default configuration
	is to allow all console connections with no password needed. To 
	prevent console messages from interrupting commands, use the logging
	synchronous option.

	[COMMANDS] 

		S1(config)# line con 0 
		S1(config-line)# password cisco
		S1(config-line)# login
		S1(config-line)# logging synchronous
		S1(config-line)# exit


/**************************************
	CONFIGURING VTY	
**************************************/

S1(config)# line con 0 
		S1(config-line)# password cisco
		S1(config-line)# login
		S1(config-line)# exit

/**************************************
	MAC ADDRESS CONFIGURATION	
**************************************/

To show the mac addresses use:

	[COMMAND] S1# show mac-address-table

To clear the mac address table:

	[COMMAND] S1# clear mac-address-table

To set up a static MAC address:

	[COMMAND] S1(config)# mac-address-table static 0050.56BE.6C89 vlan 99
		 interface fastethernet 0/6
